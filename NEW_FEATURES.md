# 🎉 New Features Documentation

Dokumentasi lengkap untuk fitur-fitur baru Transhades Transcription Bot.

## 📋 Table of Contents

- [Multi-Language Transcript & Translation](#-multi-language-transcript--translation)
- [Search & History](#-search--history)
- [Export Formats](#-export-formats)
- [Database Storage](#-database-storage)
- [Commands Reference](#-commands-reference)

---

## 🌐 Multi-Language Transcript & Translation

### Fitur Utama

Bot sekarang mendukung **20+ bahasa** untuk terjemahan otomatis hasil transkripsi.

### Bahasa yang Didukung

**European Languages:**
- `en` - English
- `es` - Spanish
- `fr` - French
- `de` - German
- `it` - Italian
- `pt` - Portuguese
- `ru` - Russian
- `nl` - Dutch
- `pl` - Polish
- `tr` - Turkish
- `sv` - Swedish
- `no` - Norwegian
- `da` - Danish
- `fi` - Finnish
- `cs` - Czech
- `hu` - Hungarian
- `ro` - Romanian

**Asian Languages:**
- `id` - Indonesian
- `ja` - Japanese
- `ko` - Korean
- `zh` - Chinese
- `ar` - Arabic
- `hi` - Hindi
- `th` - Thai
- `vi` - Vietnamese

### Cara Penggunaan

#### 1. Lihat Semua Bahasa yang Tersedia
```
/languages
```

#### 2. Translate Transcript Terakhir
```
/translate en       # Translate ke English
/translate id       # Translate ke Indonesian
/translate es       # Translate ke Spanish
```

#### 3. Download Hasil Terjemahan
Setelah translate selesai, bot akan menampilkan tombol untuk download dalam format:
- **TXT** - Plain text dengan metadata
- **Markdown** - Format Markdown dengan styling

### Fitur Translation

✨ **Auto-detect bahasa sumber** - Bot otomatis mendeteksi bahasa asli transcript

🔧 **Multiple providers** - Support Groq, Together AI, dan LibreTranslate

💾 **Database storage** - Semua terjemahan disimpan dan bisa diakses kembali

⚡ **Fast processing** - Menggunakan AI terkini untuk hasil cepat dan akurat

---

## 🔍 Search & History

### History Management

#### Lihat Riwayat Transkripsi
```
/history
```

**Output:**
- 10 transkripsi terakhir
- File name, durasi, bahasa terdeteksi
- Preview transcript (80 karakter pertama)
- Timestamp pemrosesan
- Provider yang digunakan

**Fitur:**
- Paging otomatis (menampilkan 10 dari 20 terakhir)
- Quick access ke export dan statistics
- Inline keyboard untuk aksi cepat

#### Search dalam Transcript
```
/search meeting
/search presentation
/search "specific phrase"
```

**Output:**
- Daftar transcript yang mengandung keyword
- Context snippet (40 karakter sebelum/sesudah keyword)
- File info dan timestamp
- Maksimal 10 hasil pertama

**Fitur:**
- Case-insensitive search
- Full-text search di semua transcript user
- Context highlighting

#### Statistik Pengguna
```
/stats
```

**Output:**
- Total jumlah transkripsi
- Total durasi audio yang diproses
- Breakdown by provider (Groq/Deepgram/Together)
- Breakdown by language
- Personal usage insights

---

## 📥 Export Formats

Bot mendukung export transcript dalam berbagai format profesional.

### Available Formats

#### 1. Plain Text (.txt)
```
/export → Pilih "Plain Text (.txt)"
```

**Features:**
- Clean text tanpa timestamp
- Metadata header (file name, duration, language, provider)
- Perfect untuk dokumentasi atau analisis
- UTF-8 encoding

**Example:**
```
============================================================
TRANSCRIPT METADATA
============================================================
File: meeting_20240115.mp3
Duration: 15m 30s
Language: en
Provider: groq
Processed: 2024-01-15T10:30:00
============================================================

This is the transcribed text...
```

#### 2. Markdown (.md)
```
/export → Pilih "Markdown (.md)"
```

**Features:**
- Professional formatting
- Metadata section dengan emoji
- Section headers
- Perfect untuk GitHub, Notion, atau documentation
- Optional table of contents

**Example:**
```markdown
# meeting_20240115.mp3

## 📋 Information

- **Duration:** 15m 30s
- **Language:** en
- **Provider:** Groq
- **Processed:** 2024-01-15T10:30:00

## 📝 Transcript

This is the transcribed text...

---
*Generated by Transhades Transcription Bot*
```

#### 3. Subtitles (.srt)
```
/export → Pilih "Subtitles (.srt)"
```

**Features:**
- Standard SRT format
- Auto-generated timings (10 words per segment)
- Compatible dengan video editors
- Ready untuk upload ke YouTube, Vimeo, dll

**Example:**
```srt
1
00:00:00,000 --> 00:00:02,000
This is the first segment

2
00:00:02,000 --> 00:00:04,000
of the transcribed text

3
00:00:04,000 --> 00:00:06,000
with auto-generated timings
```

#### 4. WebVTT (.vtt)
```
/export → Pilih "WebVTT (.vtt)"
```

**Features:**
- Modern web subtitle format
- HTML5 video compatible
- Better styling support than SRT
- Perfect untuk web players

**Example:**
```vtt
WEBVTT

1
00:00:00.000 --> 00:00:02.000
This is the first segment

2
00:00:02.000 --> 00:00:04.000
of the transcribed text
```

### Export History

Export seluruh history Anda:

```
/history → Pilih "Export as JSON" atau "Export as CSV"
```

#### JSON Export
- Complete data dengan semua metadata
- Machine-readable format
- Perfect untuk backup atau data analysis
- Includes: user_id, file_name, transcript, timestamps, dll

#### CSV Export
- Spreadsheet-friendly format
- Easy import ke Excel, Google Sheets
- Columns: id, file_name, duration, language, provider, transcript
- Perfect untuk reporting

---

## 💾 Database Storage

### SQLite Database

Semua transkripsi disimpan secara permanen dalam SQLite database.

#### Database Schema

**Table: `transcriptions`**
```sql
- id (PRIMARY KEY)
- user_id (INTEGER)
- chat_id (INTEGER)
- file_id (TEXT) - Telegram unique file ID
- file_name (TEXT)
- file_size (INTEGER)
- duration (REAL)
- transcript (TEXT)
- detected_language (TEXT)
- provider (TEXT)
- model (TEXT)
- timestamp (TEXT)
- processing_time (REAL)
- created_at (TIMESTAMP)
```

**Table: `translations`**
```sql
- id (PRIMARY KEY)
- transcription_id (FOREIGN KEY)
- source_language (TEXT)
- target_language (TEXT)
- translated_text (TEXT)
- created_at (TIMESTAMP)
```

#### Indexes

Optimized for fast queries:
- `idx_user_id` - Fast user lookup
- `idx_chat_id` - Fast chat lookup
- `idx_file_id` - Fast file deduplication
- `idx_timestamp` - Fast chronological sorting
- `idx_transcript_fts` - Fast full-text search

### Data Persistence

✅ **Automatic saving** - Setiap transcript otomatis disimpan

✅ **Fast retrieval** - Indexed database untuk query cepat

✅ **Search optimization** - Full-text search support

✅ **Translation history** - Semua terjemahan tersimpan

✅ **Export ready** - Data bisa di-export kapan saja

---

## 📖 Commands Reference

### Basic Commands

| Command | Description |
|---------|-------------|
| `/start` | Info bot dan cara penggunaan |
| `/help` | Panduan lengkap dengan semua fitur |
| `/provider` | Pilih provider (Groq/Deepgram/Together) |
| `/status` | Status bot, cache, queue, dan API rotation |

### History & Search Commands

| Command | Description | Example |
|---------|-------------|---------|
| `/history` | Lihat 20 transkripsi terakhir | `/history` |
| `/search <keyword>` | Cari dalam transcript | `/search meeting` |
| `/stats` | Statistik penggunaan Anda | `/stats` |

### Translation Commands

| Command | Description | Example |
|---------|-------------|---------|
| `/translate <lang>` | Translate transcript terakhir | `/translate en` |
| `/languages` | Lihat semua bahasa yang didukung | `/languages` |

### Export Commands

| Command | Description |
|---------|-------------|
| `/export` | Export transcript terakhir (TXT/MD/SRT/VTT) |

---

## 🚀 Usage Workflow

### Typical Usage Flow

1. **Upload File**
   ```
   [Upload audio/video file to bot]
   ```

2. **Get Transcript**
   ```
   Bot processes and sends transcript automatically
   ```

3. **Translate (Optional)**
   ```
   /translate en
   ```

4. **Search Later**
   ```
   /search "important topic"
   ```

5. **Export**
   ```
   /export → Choose format
   ```

6. **Check Stats**
   ```
   /stats
   ```

---

## ⚡ Performance & Optimization

### Cache System

- **File-based cache** - Duplicate files served instantly
- **Telegram file_id cache** - No re-download for same file
- **Hash-based cache** - Content deduplication

### Database Performance

- **SQLite with indexes** - Fast queries even with 1000+ records
- **Efficient search** - LIKE queries dengan indexed columns
- **Pagination** - Memory-efficient untuk large datasets

### Translation Speed

- **AI-powered** - Groq & Together AI untuk speed
- **Fallback options** - LibreTranslate sebagai backup
- **Cached translations** - Same translation tidak diproses ulang

---

## 🔧 Technical Details

### Translation Providers

1. **Groq (Preferred)**
   - Model: `llama-3.3-70b-versatile`
   - Speed: Very fast
   - Quality: Excellent
   - Cost: Free tier available

2. **Together AI**
   - Model: `Meta-Llama-3.1-70B-Instruct-Turbo`
   - Speed: Fast
   - Quality: Excellent
   - Cost: Pay per use

3. **LibreTranslate (Fallback)**
   - Self-hosted or public API
   - Speed: Moderate
   - Quality: Good
   - Cost: Free (public) or self-host

### Export Implementation

- **Streaming export** - No memory issues dengan large files
- **UTF-8 encoding** - Support semua bahasa
- **Proper formatting** - Professional output untuk semua format
- **Metadata inclusion** - Context information di setiap export

---

## 💡 Tips & Best Practices

### For Best Results

✅ **Use descriptive file names** - Memudahkan search nanti

✅ **Translate immediately** - Jika butuh multiple bahasa

✅ **Check /history regularly** - Track semua transkripsi Anda

✅ **Export important transcripts** - Backup di device Anda

✅ **Use /search** - Cari informasi spesifik dengan cepat

### Search Tips

- Gunakan keyword spesifik untuk hasil lebih akurat
- Search bersifat case-insensitive
- Hasil menampilkan context untuk memudahkan identifikasi

### Translation Tips

- Audio quality mempengaruhi kualitas terjemahan
- Groq biasanya lebih cepat dari Together AI
- LibreTranslate bagus untuk bahasa Eropa

---

## 🐛 Troubleshooting

### Common Issues

**"No transcripts found"**
- Pastikan sudah upload dan proses minimal 1 file
- Check dengan `/history` untuk konfirmasi

**"Translation service not available"**
- Bot owner perlu set API key (Groq/Together)
- Fallback ke LibreTranslate otomatis

**"Export failed"**
- Database mungkin penuh atau corrupt
- Contact bot owner untuk maintenance

**"Search returns no results"**
- Coba keyword yang lebih umum
- Check spelling
- Gunakan `/history` untuk lihat semua transcript

---

## 📞 Support

Jika mengalami masalah atau punya pertanyaan:

1. Gunakan `/help` untuk panduan dasar
2. Check dokumentasi ini untuk fitur advanced
3. Contact bot owner untuk technical issues

---

## 🎯 Future Enhancements

Planned features:

- [ ] Real-time transcription dengan websocket
- [ ] Custom subtitle timing
- [ ] Batch export multiple transcripts
- [ ] Advanced search filters (by date, language, provider)
- [ ] Translation quality rating
- [ ] Auto-translation mode
- [ ] Webhook notifications

---

**Last Updated:** January 2024
**Version:** 2.0.0
**Author:** Transhades Team

---

*Happy Transcribing! 🎵✨*